---
title: "Usando hygen para generar templates"
date: "2021-04-09T00:00:17.069Z"
published: true
tags: ["hygen", "templates", "generators"]
lang: "es"
archived: true
---
import { Image } from "astro:assets";
import articleTemplate from "../../assets/hygen/article-template.gif";
import FileTree from "@/components/FileTree";

Lo que quer√≠a implementar era una funcionalidad que extra√±aba cuando usaba [Contentz](https://github.com/contentz-tech/contentz) para √©ste blog, en el cual usando `contentz write` me generaba el archivo listo para empezar a escribir. As√≠ fue como decid√≠ usar `hygen` para obtener √©sta misma funcionalidad ahora que mi blog migr√≥ a NextJS.

[hygen](https://github.com/jondot/hygen) es un generador de c√≥digo que permite automatizar la creaci√≥n de varios archivos desde el terminal.

As√≠ que sin m√°s pre√°mbulo, √©stos fueron los pasos que segu√≠ para generar lo que quer√≠a.

A√±adiendo `hygen` a las dependencias de desarrollo

```bash
yarn add -D hygen
```

Ahora empec√©mos a crear nuestro template, `hygen` por defecto usa la carpeta `_templates` pero decid√≠ cambiarla por `.hygen` para tenerlo m√°s claro.

Para realizar ese cambio primero creamos un archivo de configuraci√≥n de `hygen` llamado `.hygen.js`.

```javascript
module.exports = {
  templates: `${__dirname}/.hygen`,
};
```

Ahora si creamos la carpeta `.hygen` y dentro de ella la carpeta `new` y dentro de √©sta nuestro archivo template `article.ejs.t`.

<FileTree client:load data={[
    {
      "type": "folder",
      "name": ".hygen",
      "defaultOpen": ["new"],
      "children": [
        {
          "type": "folder",
          "name": "new",
          "children": [{ "type": "file", "name": "article.ejs.t" }]
        }
      ]
    }
  ]}
  defaultOpen={[".hygen"]}
/>

```javascript
---
to: <%= absPath %>/<%= h.changeCase.paramCase(article_name) %>.mdx
---
import Article from "../../components/Article";

export const meta = {
  title: "<%= article_name %>",
  description: "<%= description %>",
  date: "<%= date %>",
  published: false,
};

export default ({ children }) => <Article meta={meta}>{children}</Article>;

Start writting ... üìù
```

`hygen` usa el frontmatter para determinar algunas propiedades del template, en √©ste caso con `to` le decimos la ruta donde queremos
que se cree el archivo.

Algo adicional que podemos notar es que `hygen` tiene algunas funciones que ayudan a formatear textos(en √©ste caso usamos `h.changeCase.paramCase`)

Todas las variables que est√°n dentro de los s√≠mbolos `<%= %>` son los que recibiremos al momento de crear usando el template (m√°s adelante veremos como los vamos a enviar).

El resto del archivo es la estructura que queremos para nuestro archivo.

Ahora vamos a configurarlo para que la creaci√≥n sea interactiva en el terminal. Para √©sto creamos un archivo `index.js` al lado de nuestro template `article.ejs.t`

```javascript
module.exports = {
  prompt: ({ inquirer }) => {
    const questions = [
      {
        type: "input",
        name: "article_name",
        message: "What is the article name?",
      },
      {
        type: "input",
        name: "description",
        message: "What is the description?",
      },
    ];
    return inquirer.prompt(questions).then((answers) => {
      const { article_name, description } = answers;
      const absPath = "pages/articles";
      const date = new Date().toJSON();
      return { article_name, description, absPath, date };
    });
  },
};
```

Siguiendo un poco la [documentaci√≥n](http://www.hygen.io/docs/generators#advanced-interactive-prompt) creamos este archivo que nos va a preguntar por el `article_name` y `description` al usar el generador.

Tanto `absPath` como `date` ya est√°n definidos ah√≠.

Ahora tenemos que llamar el comando que generar√° nuestro template, para √©sto `hygen` sigue la estructura de carpetas que hemos creado anteriormente `hygen new article`.

Finalmente, lo a√±adimos a nuestros scripts en `package.json`.

```json
"scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",

    "new:article": "hygen new article"
},
```

Ahora cada vez que queremos generarlo simplemente usamos

```bash
yarn new:article
```

Y nos preguntar√° por el nombre y descripci√≥n del art√≠culo

<Image src={articleTemplate} alt="Generando nuestro template desde CLI" />
